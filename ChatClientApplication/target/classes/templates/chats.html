<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <title>–°–ø–∏—Å–æ–∫ —á–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title>
    <link rel="stylesheet" href="/css/chats.css" />
</head>
<body>
<div class="container">
    <div class="main-header">
        <div class="header-buttons left">
            <button id="logoutBtn" class="header-action-btn logout-btn">–í—ã–π—Ç–∏</button>
        </div>

        <h1>–í–∞—à–∏ —á–∞—Ç—ã</h1>

        <div class="header-buttons right">
            <button id="findUserBtn" class="header-action-btn find-user-btn">–ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
        </div>
    </div>
    <div id="status" class="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    <div class="chat-wrapper">
        <ul id="chatList" class="chat-list"></ul>
        <section id="chatWindow" class="chat-window hidden">
            <div id="attachmentsModal" class="modal hidden">
                <div class="modal-content attachments-modal">
                    <header class="modal-header">
                        <h2>–í–ª–æ–∂–µ–Ω–∏—è</h2>
                        <button id="closeAttachmentsBtn" class="close-btn" title="–ó–∞–∫—Ä—ã—Ç—å">√ó</button>
                    </header>

                    <div class="attachments-tabs">
                        <button data-type="IMAGE" class="tab-btn active">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</button>
                        <button data-type="VIDEO" class="tab-btn">–í–∏–¥–µ–æ</button>
                        <button data-type="AUDIO" class="tab-btn">–ê—É–¥–∏–æ</button>
                        <button data-type="FILE" class="tab-btn">–§–∞–π–ª—ã</button>
                    </div>

                    <div id="attachmentsContent" class="attachments-content">
                        <!-- –ó–∞–≥—Ä—É–∑—á–∏–∫ / –≤–ª–æ–∂–µ–Ω–∏—è -->
                    </div>
                </div>
            </div>


            <header class="chat-window__header">
                <button id="closeChatBtn" class="close-btn" title="–ó–∞–∫—Ä—ã—Ç—å —á–∞—Ç">√ó</button>
                <h2 id="chatTitle">–ß–∞—Ç</h2>
                <button id="attachmentsBtn" class="attachments-btn" title="–í–ª–æ–∂–µ–Ω–∏—è">–í–ª–æ–∂–µ–Ω–∏—è üìÇ</button>
            </header>
            <div id="messages" class="messages">
                <p class="placeholder">–í—ã–±–µ—Ä–∏—Ç–µ —á–∞—Ç, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –æ–±—â–µ–Ω–∏–µ</p>
            </div>
            <form id="messageForm" class="message-form">
                <button type="button" id="attachFileBtn" class="attach-btn" title="–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª">üìé</button>
                <input type="file" id="fileInput" hidden />

                <input
                        type="text"
                        id="messageInput"
                        class="message-input"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
                        autocomplete="off"
                />
                <button type="submit" id="sendBtn" class="send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </form>
            <div id="attachmentPreviewContainer" class="attachment-preview-container"></div>
        </section>
    </div>
</div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
<div id="userSearchModal" class="modal hidden">
    <div class="modal-content">
        <header class="modal-header">
            <h2>–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç</h2>
            <button id="closeModalBtn" class="close-btn" title="–ó–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –ø–æ–∏—Å–∫–∞">√ó</button>
        </header>
        <div id="userListContainer" class="user-list-container">
            <!-- –°—é–¥–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
        </div>
    </div>
</div>


<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫ -->
<script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>

<!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã -->
<script src="/js/apiClient.js"></script>
<script src="/js/chats.js"></script>

</body>
</html>